{% load wagtailcore_tags static wagtailsettings_tags %}
{% get_settings %}
<nav id="nav" class="fixed top-0 left-0 w-full z-50 transition-all duration-300 border-b bg-transparent border-transparent">
    <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
        <!-- Logo -->
        <a href="/" class="flex items-end space-x-3 z-50">
            <img src="{% static 'images/dr_Logo.svg' %}" 
                 alt="{{ settings.sld_project.SiteSettings.studio_name|default:'Studio Legale' }}" 
                 class="h-12 w-auto">
            <span class="text-xl font-bold tracking-tighter text-brand-black hidden sm:inline -mb-[5px]">
                {{ settings.sld_project.SiteSettings.studio_name|default:"Studio Legale" }}
            </span>
        </a>

        <!-- Desktop Menu -->
        <div class="hidden md:flex items-center space-x-8">
            <a href="/#about" class="text-sm font-medium text-brand-gray hover:text-brand-accent transition-colors tracking-wide uppercase">Lo Studio</a>
            <a href="/aree-pratica/" class="text-sm font-medium text-brand-gray hover:text-brand-accent transition-colors tracking-wide uppercase">Aree di Pratica</a>
            <a href="/domiciliazioni/" class="text-sm font-medium text-brand-gray hover:text-brand-accent transition-colors tracking-wide uppercase">Domiciliazioni</a>
            <a href="/contatti/" class="text-sm font-medium text-brand-gray hover:text-brand-accent transition-colors tracking-wide uppercase">Contatti</a>
            <a href="/prenota/" class="text-sm font-bold text-brand-white bg-brand-accent hover:bg-brand-black transition-colors tracking-wide uppercase px-4 py-2">Prenota</a>
        </div>

        <!-- Mobile Toggle -->
        <button id="mobile-toggle" class="md:hidden text-brand-black z-50 focus:outline-none">
            <i data-lucide="menu" class="w-6 h-6"></i>
        </button>

        <!-- Mobile Menu Overlay -->
        <div id="mobile-menu" class="fixed inset-0 bg-brand-white flex flex-col items-center justify-center space-y-8 opacity-0 pointer-events-none transition-opacity duration-300 md:hidden">
            <img src="{% static 'images/dr_Logo.svg' %}" 
                 alt="Studio Legale" 
                 class="h-16 w-auto mb-4">
            <a href="/#about" class="text-3xl font-bold text-brand-black tracking-tighter hover:text-brand-accent transition-colors">Lo Studio</a>
            <a href="/aree-pratica/" class="text-3xl font-bold text-brand-black tracking-tighter hover:text-brand-accent transition-colors">Aree di Pratica</a>
            <a href="/domiciliazioni/" class="text-3xl font-bold text-brand-black tracking-tighter hover:text-brand-accent transition-colors">Domiciliazioni</a>
            <a href="/contatti/" class="text-3xl font-bold text-brand-black tracking-tighter hover:text-brand-accent transition-colors">Contatti</a>
            <a href="/prenota/" class="text-3xl font-bold text-brand-accent tracking-tighter hover:text-brand-black transition-colors">Prenota</a>
        </div>
    </div>
</nav>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const nav = document.getElementById('nav');
    const mobileToggle = document.getElementById('mobile-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    let isOpen = false;
    
    // Scroll effect
    window.addEventListener('scroll', function() {
        if (window.scrollY > 50) {
            nav.classList.add('bg-brand-white/90', 'backdrop-blur-md', 'border-brand-gray/20');
            nav.classList.remove('bg-transparent', 'border-transparent');
        } else {
            nav.classList.remove('bg-brand-white/90', 'backdrop-blur-md', 'border-brand-gray/20');
            nav.classList.add('bg-transparent', 'border-transparent');
        }
    });
    
    // Mobile toggle
    mobileToggle.addEventListener('click', function() {
        isOpen = !isOpen;
        if (isOpen) {
            mobileMenu.classList.remove('opacity-0', 'pointer-events-none');
            mobileMenu.classList.add('opacity-100', 'pointer-events-auto');
        } else {
            mobileMenu.classList.add('opacity-0', 'pointer-events-none');
            mobileMenu.classList.remove('opacity-100', 'pointer-events-auto');
        }
    });
    
    // Close on link click
    mobileMenu.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
            isOpen = false;
            mobileMenu.classList.add('opacity-0', 'pointer-events-none');
            mobileMenu.classList.remove('opacity-100', 'pointer-events-auto');
        });
    });
});
</script>